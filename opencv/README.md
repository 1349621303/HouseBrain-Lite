# 宿舍视频流实现
主要技术：
- opencv
- 深度学习
- 请求处理

## 主要实现功能

### 视频监控，行人检测
发现行人可以及时检测出，并且圈出这些人
行人检测使用的是支持向量机进行检测，通过官方进行训练后的数据进行分类，在效果上比较好，能够较为精确到1检测出行人

视频监控主要是通过服务器对树每派数据的访问实现，通过调整相关频率，能够实现效果良好的视频监控。

关于与后端的接口交互问题，建议开启跨域访问，留下相关接口。我可以直接在监控模块中留下可以发出请求的函数

### 人脸识别开门
使用opencv进行图片收集，DL进行人脸识别
准确率较高。
问题：需要进行硬件模拟

### 关于宿舍卫生状况提醒
使用深度学习制作的图片分类问题，能够较精确的判断宿舍是干净还是比较脏。
目前设想是每天固定时间段对宿舍进行卫生，如果检测判定为脏，那么就发送邮件等提醒给用户，并且附上图片
- 使用kaggle上的数据，加上百度爬虫
- cnn卷积神经网络，正则化，图像增强防止过拟合
- 迁移学习（考虑到性能，还是不用为好）
目前在较低的内存开销下，能够实现80%的正确率。


### 发送邮件以及日常任务
发送邮件主要使用python的email库，通过在163邮箱打开相关权限后，能够实现基本的发送邮件等功能。

定时任务主要使用schedule库，这个库能够以较小的资源开销实现基本的任务计时安排，
我们的项目中，主要是在每天的10：00对宿舍的卫生状态进行判定，然后发送邮件，邮件内容包括宿舍图片，以及相关提示语。

## 关于如何实现将opencv嵌入到项目中去
- 如果进行实时监控是行不通的，因为性能有限，使用hog+svm进行行人检测过于消耗资源。
- 关于对于实时监控中随机隔一定时间抽取图片进行分析也是不好的，其实也还行，就是数据的传输问题。干脆存到本地，用中间数据作为媒介。
`实时监控，但是不实时分析，抽取间隔分析`
  
综上考虑：
- 使用留下api的方式去掉用摄像头。获取当前图片
- 不同的api代表不同的对图片分析功能。
- 使用flask构建简单api

- 前端使用轮询的方式获取行人数据

进程通信问题





人脸识别就不要了，感觉没什么用。而且功能冲突了。





进度：
- 目前基本的界面加上了，动态更新也解决了，动态加载，
- 不过关于检测结果的api还是需要继续解决。 还有一个卫生的那个



### 思路

- 进行职能划分，
- 树每派只进行视频流数据的读取与推送，
- 然后服务器进行数据的接受。




### 目前

- 行人识别，使用svm支持向量机进行检测（opencv自带）
通过树梅派采集数据后，对数据进行分析，由于机能问题，如果每一帧都检测是不现实的，所以要在保证功能的前提下尽可能的减小资源的开销。
- 脏乱宿舍， 使用pytorch进行训练
- 整体部署，树每派进行数据采集
- 服务器进行数据分析， 以及逻辑部署